function Node(){this.annotationNodeId,this.originalNodeOrder,this.leafNodeInfo,this.branchLength=0,this.cumulativeBranchLength=0,this.subfamilyInfo,this.propagatedSfName,this.eventType,this.referenceSpeciationEvent,this.numLeavesInTree,this.nodeType,this.mf,this.bp,this.cc,this.pc,this.color="rgb(0, 0, 0)",this.backgroundColor=void 0,this.tooltip,this.parent,this.expanded=!0,this.children,this.position,this.nodeTypeDuplication="DUPLICATION",this.nodeTypeHorizontalTransfer="HORIZONTAL_TRANSFER",Node.prototype.getColor=function(){return this.color},Node.prototype.setColor=function(e){this.color=e},Node.prototype.getBgColor=function(){return this.backgroundColor},Node.prototype.setBgColor=function(e){this.backgroundColor=e},Node.prototype.getBranchLength=function(){return this.branchLength},Node.prototype.getCumulativeBranchLength=function(){return this.cumulativeBranchLength},Node.prototype.isDuplication=function(){return void 0!==this.nodeType&&!(this.nodeType.indexOf(this.nodeTypeDuplication)<0)},Node.prototype.isHorizontalTransfer=function(){return void 0!==this.nodeType&&!(this.nodeType.indexOf(this.nodeTypeHorizontalTransfer)<0)},Node.prototype.setPosition=function(e){this.position=e},Node.prototype.getPosition=function(){return this.position},Node.prototype.getAnnotationNodeId=function(){return this.annotationNodeId},Node.prototype.getOriginalNodeOrder=function(){return this.originalNodeOrder},Node.prototype.getLeafNodeInfo=function(){return this.leafNodeInfo},Node.prototype.getSubfamilyInfo=function(){return this.subfamilyInfo},Node.prototype.getPropagatedSfName=function(){return this.propagatedSfName},Node.prototype.getEventType=function(){return this.eventType},Node.prototype.getReferenceSpeciationEvent=function(){return this.referenceSpeciationEvent},Node.prototype.getNumLeavesInTree=function(){return this.numLeavesInTree},Node.prototype.setNumLeavesInTree=function(e){this.numLeavesInTree=e},Node.prototype.getMf=function(){return this.mf},Node.prototype.getBp=function(){return this.bp},Node.prototype.getCc=function(){return this.cc},Node.prototype.getPc=function(){return this.pc},Node.prototype.setChildren=function(e){this.children=e},Node.prototype.getChildren=function(){return this.children},Node.prototype.setExpanded=function(e){this.expanded=e},Node.prototype.isExpanded=function(){return this.expanded},Node.prototype.isLeaf=function(){return void 0===this.children||0===this.children.length},Node.prototype.isTerminus=function(){return!0===this.isLeaf()||!1===this.isExpanded()},Node.prototype.isSubfamily=function(){return void 0!==this.subfamilyInfo},Node.prototype.getParent=function(){return this.parent},Node.prototype.getDescendent=function(e,t){if(null!==e){var o=e.getChildren();if(void 0!==o)for(var n=0;n<o.length;n++){var i=o[n];t.push(i),this.getDescendent(i,t)}}},Node.prototype.moveToTop=function(e){if(null!==e){var t=e.getParent();if(null!==t&&void 0!==t){var o=t.getChildren();if(null!==o){for(var n=0;n<o.length;n++)if(o[n]===e){if(0===n)break;var i=o[0];o[0]=o[n],o[n]=i;break}this.moveToTop(t)}}}},Node.prototype.getDescendentSfList=function(e,t){var o=[];this.getDescendent(e,o),!0===t&&o.push(e);for(var n=[],i=0;i<o.length;i++){var r=o[i];void 0!==r.getSubfamilyInfo()&&n.push(r)}if(0!==n.length)return n},Node.prototype.expandAllSubfamilyNodes=function(e){var t=this.getDescendentSfList(e,!0);if(void 0!==t)for(var o=0;o<t.length;o++)t[o].setExpanded(!0)},Node.prototype.expandAllNodes=function(e){if(e.setExpanded(!0),void 0!==e.children)for(var t=0;t<e.children.length;t++){var o=e.children[t];o.setExpanded(!0),this.expandAllNodes(o)}},Node.prototype.collapseLowestLevelSf=function(e){var t=this.getDescendentSfList(e,!0);if(void 0!==t){for(var o=new Hashtable,n=0;n<t.length;n++){var i=t[n];void 0===this.getDescendentSfList(i,!1)&&o.put(i,i)}this.colapseLowestLevelSfNode(o)}},Node.prototype.colapseLowestLevelSfNode=function(e){var t=e.keys();if(void 0!==t)for(var o=0;o<t.length;o++)t[o].setExpanded(!1)},Node.prototype.getLabel=function(){if(void 0!==this.getSubfamilyInfo())return this.getSubfamilyInfo().getSubfamilyId()+"-"+this.getSubfamilyInfo().getSubfamilyName()+" ("+this.getAnnotationNodeId()+")";if(void 0!==this.getLeafNodeInfo()){var e=this.getSubfamilyAncestor(this);return void 0!==e&&null!==e&&void 0!==e.getSubfamilyInfo()?e.getSubfamilyInfo().getSubfamilyId()+"-"+this.getLeafNodeInfo().getNodeSpeciesGeneSymbolDisplay()+" ("+this.getAnnotationNodeId()+")":this.getLeafNodeInfo().getNodeSpeciesGeneSymbolDisplay()+" ("+this.getAnnotationNodeId()+")"}return this.getAnnotationNodeId()},Node.prototype.getSubfamilyAncestor=function(e){if(void 0!==e)return void 0!==e.getSubfamilyInfo()?e:this.getSubfamilyAncestor(e.getParent())},Node.prototype.getTooltip=function(){if(void 0!==this.tooltip)return this.tooltip;var e=this.getSubfamilyAncestor(this),t=this.getLeafNodeInfo();if(void 0===e)return void 0===t?(this.tooltip=this.getAnnotationNodeId(),this.tooltip):(this.tooltip=this.getAnnotationNodeId()+"-"+t.getNodeName(),this.tooltip);var o=e.getSubfamilyInfo();return this.tooltip=this.getAnnotationNodeId()+" Member of subfamily "+o.getSubfamilyId()+" "+o.getSubfamilyName(),this.tooltip},Node.prototype.parse=function(e,t,o){e.annotationNodeId=t.accession,o.put(e.annotationNodeId,e),e.mf=t.MF,e.bp=t.BP,e.cc=t.CC,e.pc=t.PC,e.referenceSpeciationEvent=t.reference_speciation_event,e.eventType=t.event_type,e.nodeType=t.node_type,e.branchLength=parseFloat(t.branch_length),void 0!==e.parent&&(e.cumulativeBranchLength=e.parent.cumulativeBranchLength+e.parent.branchLength);var n=t.sf_id;if(void 0!==n){var i=new Subfamily,r=n.indexOf(":");r>=0&&(n=n.substring(r+1,n.length)),i.setSubfamilyId(n),i.setSubfamilyName(t.sf_name),e.subfamilyInfo=i}var a=t.sf_name;void 0!==a&&(e.propagatedSfName=a);var d=t.children;if(void 0===d){var s=new LeafNodeInfo;return e.leafNodeInfo=s,s.definition=t.definition,s.geneId=t.gene_id,s.geneSymbol=t.gene_symbol,s.organism=t.organism,void(s.nodeName=t.node_name)}e.children=[];for(var f=d.annotation_node_asArray,p=0;p<f.length;p++){var u=new Node;u.parent=e,u.originalNodeOrder=p,e.children.push(u),e.parse(u,f[p],o)}}}function Subfamily(){this.subfamilyId,this.subfamilyName,Subfamily.prototype.getSubfamilyId=function(){return this.subfamilyId},Subfamily.prototype.setSubfamilyId=function(e){this.subfamilyId=e},Subfamily.prototype.getSubfamilyName=function(){return this.subfamilyName},Subfamily.prototype.setSubfamilyName=function(e){this.subfamilyName=e}}function LeafNodeInfo(){this.nodeName,this.geneId,this.geneSymbol,this.organism,this.definition,LeafNodeInfo.prototype.getNodeName=function(){return this.nodeName},LeafNodeInfo.prototype.getGeneId=function(){return this.geneId},LeafNodeInfo.prototype.getGeneSymbol=function(){return this.geneSymbol},LeafNodeInfo.prototype.getOrganism=function(){if(void 0!=this.organism)return this.organism;if(void 0!=this.nodeName){var e=this.nodeName.split("|");if(0<e.length)return e[0]}return""},LeafNodeInfo.prototype.getDefinition=function(){return this.definition},LeafNodeInfo.prototype.getNodeSpeciesGeneSymbolDisplay=function(){var e=this.nodeName.split("|");return 0<e.length?null!=this.geneSymbol&&void 0!=this.geneSymbol?e[0]+"_"+this.geneSymbol:e[0]:this.nodeName}}